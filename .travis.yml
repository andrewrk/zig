sudo: required
services:
  - docker
os:
  - linux
  - osx
env:
  - QEMU_OS=none
matrix:
  include:
  - os: linux
    env: QEMU_OS=openbsd
cache:
  directories:
  - $HOME/openbsd_amd64_ccache
dist: trusty
osx_image: xcode8.3
language: cpp
before_install:
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then ci/travis_linux_before_install; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then ci/travis_osx_before_install; fi
install:
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then ci/travis_linux_install; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then ci/travis_osx_install; fi
script:
  - if [[ "$TRAVIS_OS_NAME" == "linux" && "$QEMU_OS" == "none" ]]; then ci/travis_linux_script; fi
  - if [[ "$TRAVIS_OS_NAME" == "linux" && "$QEMU_OS" == "openbsd" ]]; then ci/travis_openbsd_qemu_script; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then ci/travis_osx_script; fi
